<% title = "HR System" %>

<!-- Attendance View -->
<div id="attendanceView" class="p-6" style="display: block">
	<div class="mb-6">
		<h1 class="text-3xl font-semibold text-gray-800">Attendance</h1>
		<p class="text-gray-500">Track your daily attendance and view history</p>
	</div>

	<!-- Current Date and Time -->
	<div class="bg-white p-6 rounded-md shadow-sm border border-gray-200 mb-6">
		<div class="flex flex-col md:flex-row justify-between items-center">
			<div>
				<h2 class="text-xl font-semibold mb-2">Today's Attendance</h2>
				<p class="text-gray-500" id="currentDate"></p>
				<p class="text-gray-500" id="currentTime"></p>
			</div>
			<div class="mt-4 md:mt-0 flex flex-col sm:flex-row gap-4">
				<button
					id="checkInBtn"
					onclick="App.checkIn()"
					class="bg-black text-white px-6 py-3 rounded-md flex items-center justify-center"
				>
					<!-- Icon -->
					<svg
						xmlns="http://www.w3.org/2000/svg"
						class="h-5 w-5 mr-2"
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
						stroke-width="2"
					>
						<path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" />
						<polyline points="10 17 15 12 10 7" />
						<line x1="15" y1="12" x2="3" y2="12" />
					</svg>
					Check In
				</button>
				<button
					id="checkOutBtn"
					onclick="App.checkOut()"
					class="bg-gray-800 text-white px-6 py-3 rounded-md flex items-center justify-center"
				>
					<!-- Icon -->
					<svg
						xmlns="http://www.w3.org/2000/svg"
						class="h-5 w-5 mr-2"
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
						stroke-width="2"
					>
						<path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
						<polyline points="16 17 21 12 16 7" />
						<line x1="21" y1="12" x2="9" y2="12" />
					</svg>
					Check Out
				</button>
			</div>
		</div>

		<!-- Today's Status -->
		<div class="mt-6 border-t border-gray-200 pt-4">
			<h3 class="text-lg font-medium mb-3">Today's Status</h3>
			<div class="grid grid-cols-1 md:grid-cols-3 gap-4">
				<div class="bg-gray-50 p-4 rounded-md">
					<p class="text-sm text-gray-500 mb-1">Check In Time</p>
					<p class="text-lg font-medium" id="checkInTimeText">
						Not checked in yet
					</p>
				</div>
				<div class="bg-gray-50 p-4 rounded-md">
					<p class="text-sm text-gray-500 mb-1">Check Out Time</p>
					<p class="text-lg font-medium" id="checkOutTimeText">
						Not checked out yet
					</p>
				</div>
				<div class="bg-gray-50 p-4 rounded-md">
					<p class="text-sm text-gray-500 mb-1">Work Duration</p>
					<p class="text-lg font-medium" id="workDurationText">-</p>
				</div>
			</div>
		</div>
	</div>

	<!-- Attendance History -->
	<div class="bg-white p-6 rounded-md shadow-sm border border-gray-200">
		<div class="flex justify-between items-center mb-6">
			<h2 class="text-xl font-semibold">Attendance History</h2>
			<button
				id="openHistoryModalBtn"
				class="bg-gray-800 text-white px-4 py-2 rounded-md flex items-center"
			>
				<svg
					xmlns="http://www.w3.org/2000/svg"
					class="h-5 w-5 mr-2"
					viewBox="0 0 24 24"
					fill="none"
					stroke="currentColor"
					stroke-width="2"
					stroke-linecap="round"
					stroke-linejoin="round"
				>
					<path
						d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
					></path>
					<polyline points="14 2 14 8 20 8"></polyline>
					<line x1="16" y1="13" x2="8" y2="13"></line>
					<line x1="16" y1="17" x2="8" y2="17"></line>
					<polyline points="10 9 9 9 8 9"></polyline>
				</svg>
				View Full History
			</button>
		</div>

		<!-- Recent Attendance Records -->
		<div class="overflow-x-auto">
			<table class="min-w-full divide-y divide-gray-200">
				<thead class="bg-gray-50">
					<tr>
						<th
							class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"
						>
							Date
						</th>
						<th
							class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"
						>
							Check In
						</th>
						<th
							class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"
						>
							Check Out
						</th>
						<th
							class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"
						>
							Status
						</th>
					</tr>
				</thead>
				<tbody
					id="attendanceTableBody"
					class="bg-white divide-y divide-gray-200"
				>
					<!-- Table rows akan dimasukkan lewat JavaScript -->
				</tbody>
			</table>
		</div>
	</div>

	<!-- Attendance History Modal -->
	<div
		id="attendanceHistoryModal"
		class="fixed z-10 inset-0 overflow-y-auto hidden"
		aria-labelledby="attendance-history-modal-title"
		role="dialog"
		aria-modal="true"
	>
		<div
			class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"
		>
			<!-- Background Overlay -->
			<div
				class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"
				aria-hidden="true"
			></div>

			<span
				class="hidden sm:inline-block sm:align-middle sm:h-screen"
				aria-hidden="true"
				>&#8203;</span
			>

			<!-- Modal Content -->
			<div
				class="inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6"
			>
				<div>
					<div class="mt-3 text-center sm:mt-0 sm:text-left">
						<h3
							class="text-lg leading-6 font-medium text-gray-900"
							id="attendance-history-modal-title"
						>
							Full Attendance History
						</h3>

						<div class="mt-4">
							<!-- Filter Controls -->
							<div
								class="flex flex-col sm:flex-row justify-between items-center mb-4 gap-4"
							>
								<div class="flex space-x-4">
									<div class="relative">
										<select
											id="filterMonth"
											class="block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-black focus:border-black sm:text-sm rounded-md appearance-none"
										>
											<option value="all">All Months</option>
											<option value="0">January</option>
											<option value="1">February</option>
											<option value="2">March</option>
											<option value="3">April</option>
											<option value="4">May</option>
											<option value="5">June</option>
											<option value="6">July</option>
											<option value="7">August</option>
											<option value="8">September</option>
											<option value="9">October</option>
											<option value="10">November</option>
											<option value="11">December</option>
										</select>
										<div
											class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none"
										>
											<svg
												xmlns="http://www.w3.org/2000/svg"
												class="h-5 w-5 text-gray-400"
												viewBox="0 0 20 20"
												fill="currentColor"
											>
												<path
													fill-rule="evenodd"
													d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
													clip-rule="evenodd"
												/>
											</svg>
										</div>
									</div>
									<div class="relative">
										<select
											id="filterStatus"
											class="block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-black focus:border-black sm:text-sm rounded-md appearance-none"
										>
											<option value="all">All Status</option>
											<option value="Hadir">Hadir</option>
											<option value="Izin">Izin</option>
											<option value="Sakit">Sakit</option>
											<option value="Cuti">Cuti</option>
										</select>
										<div
											class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none"
										>
											<svg
												xmlns="http://www.w3.org/2000/svg"
												class="h-5 w-5 text-gray-400"
												viewBox="0 0 20 20"
												fill="currentColor"
											>
												<path
													fill-rule="evenodd"
													d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
													clip-rule="evenodd"
												/>
											</svg>
										</div>
									</div>
								</div>
								<div>
									<button
										id="exportAttendanceBtn"
										class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-black hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black"
									>
										<svg
											xmlns="http://www.w3.org/2000/svg"
											class="h-5 w-5 mr-2"
											viewBox="0 0 24 24"
											fill="none"
											stroke="currentColor"
											stroke-width="2"
											stroke-linecap="round"
											stroke-linejoin="round"
										>
											<path
												d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"
											></path>
											<polyline points="7 10 12 15 17 10"></polyline>
											<line x1="12" y1="15" x2="12" y2="3"></line>
										</svg>
										Export
									</button>
								</div>
							</div>

							<!-- Attendance Table -->
							<div class="overflow-x-auto max-h-96">
								<table class="min-w-full divide-y divide-gray-200">
									<thead class="bg-gray-50 sticky top-0">
										<tr>
											<th
												class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
											>
												Date
											</th>
											<th
												class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
											>
												Check In
											</th>
											<th
												class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
											>
												Check Out
											</th>
											<th
												class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
											>
												Status
											</th>
										</tr>
									</thead>
									<tbody
										id="historyTableBody"
										class="bg-white divide-y divide-gray-200"
									>
										<!-- Isi tabel akan dimasukkan lewat JavaScript -->
									</tbody>
								</table>
							</div>

							<!-- Summary Stats -->
							<div class="mt-6 border-t border-gray-200 pt-4">
								<h4 class="text-md font-medium mb-3">Summary</h4>
								<div class="grid grid-cols-2 md:grid-cols-3 gap-4">
									<div class="bg-gray-50 p-3 rounded-md">
										<p class="text-xs text-gray-500 mb-1">Hadir</p>
										<p id="summaryHadir" class="text-lg font-medium">0</p>
									</div>
									<div class="bg-gray-50 p-3 rounded-md">
										<p class="text-xs text-gray-500 mb-1">Izin</p>
										<p id="summaryIzin" class="text-lg font-medium">0</p>
									</div>
									<div class="bg-gray-50 p-3 rounded-md">
										<p class="text-xs text-gray-500 mb-1">Sakit</p>
										<p id="summarySakit" class="text-lg font-medium">0</p>
									</div>
									<div class="bg-gray-50 p-3 rounded-md">
										<p class="text-xs text-gray-500 mb-1">Cuti</p>
										<p id="summaryCuti" class="text-lg font-medium">0</p>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
						<button
							type="button"
							onclick="closeModal()"
							class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black sm:mt-0 sm:w-auto sm:text-sm"
						>
							Close
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="/js/attendance.js"></script>
